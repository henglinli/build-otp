dist: trusty
sudo: false
addons:
  apt:
    packages:
    - libtinfo-dev
language: c
compiler: clang
script:
- cd $TRAVIS_BUILD_DIR
- curl -L https://github.com/erlang/otp/archive/OTP-19.2.tar.gz | tar xz
- ls -l
- cd otp-OTP*
- ./otp_build autoconf
- ./otp_build configure --without-termcap --enable-smp-support --enable-m64-build --enable-hipe --without-javac --enable-builtin-zlib --disable-saved-compile-time 
- ./otp_build boot -a
- ./otp_build release -a $TRAVIS_BUILD_DIR/otp
- ls -l $TRAVIS_BUILD_DIR/otp
- cd $TRAVIS_BUILD_DIR && tar cfz otp.tar.gz otp
deploy:
  provider: releases
  api_key: f037aabc6ee3b45d06c1d3ff6a4c0e533b4d9dfb
  file: otp.tar.gz
  skip_cleanup: true
  on:
    tags: true
